<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Docs - Factorio Library</title>
</head>

<body>
  <h1>Factorio Blueprint Library API Docs</h1>
  <hr>
  <h2>Login</h2>
  <h3>/api/login</h3>
  <ul>
    <li>Methods: POST</li>
    <li>
      Body: 
      <ul>
        <li>Type: JSON</li>
        <li>Structure: <code>{ username: string, password: string }</code></li>
      </ul>
    </li>
    <li>
      Response:
      <ul>
        <li>Type: JSON</li>
        <li>Structure: <code>{}</code></li>
      </ul>
    </li>
    <li>
      Description: Checks the provided username and password for a valid account and sends back a login token.
    </li>
    <li>
      Todo:
      <ul>
        <li>Add a 'trust this computer' bool</li>
      </ul>
    </li>
  </ul>

  <h3>/login/verify</h3>
  <p>Requires a username and email.</p>
  <p>
    Checks if the username is used and returns an error if so, otherwise generates
    a random code, emails it to the provided address and returns the the code
    for the client to check against. This should be improved in the future since this does nothing to effectively stop
    someone intentionally using someone elses email, it just makes sure that a normal user didn't mistype their recovery
    email.
  </p>
  <p>
    Returns the code for client to check user response against before
    sending /login/new.
  </p>

  <h3>/login/new</h3>
  <p>Requires username, password, and an email.</p>
  <p>
    Check if a matching username exists and return an error if so, otherwise
    crate a new user entry and generate new login key to be set and returned.
  </p>
  <p>Returns login key.</p>
  <hr>
  <h2>Content</h2>
  <h3>/content/favorites</h3>
  <p>Requires a login key and page size or id and action.</p>
  <p>
    Gets the favorite Ids of the user, queries for each Ids entry and returns
    all the entries or adds or removes a specified id from favorites.
  </p>
  <p>Returns favorite entries.</p>

  <h3>/content/query</h3>
  <p>Optional filter, optional sort, optional login key and Requires page limit.</p>
  <p>
    Performs a query with the given filter, limit, and sort and returns the
    results. If a login key was given, also refreshes it and returns the new
    key and their favorite Ids.
  </p>
  <p>Returns results, optionally favorites and login key.</p>

  <h3>/content/new</h3>
  <p>Requires login key and object to enter.</p>
  <p>
    Checks the user of the login key and adds the object to the database if it is formatted properly.
  </p>
  <p>Returns if of added object login key.</p>

  <h3>maybe update and delete later</h3>
  <h3>todo: add to favorites</h3>
</body>

</html>